# snmp.yml for MikroTik (Extended)
auths:
  public_v1:
    community: public
    security_level: noAuthNoPriv
    auth_protocol: MD5
    priv_protocol: DES
    version: 1
  public_v2:
    community: public
    security_level: noAuthNoPriv
    auth_protocol: MD5
    priv_protocol: DES
    version: 2

modules:
  if_mib:
    walk: 
      - 1.3.6.1.2.1.2
      - 1.3.6.1.2.1.31.1.1
      - 1.3.6.1.2.1.25.3.3.1.2 # hrProcessorLoad
      - 1.3.6.1.2.1.25.2.3.1 # hrStorage
      - 1.3.6.1.2.1.1.3.0 # sysUpTime
    lookups:
      - source_indexes: [ifIndex]
        lookup: 1.3.6.1.2.1.2.2.1.2 # ifDescr
        drop_source_indexes: false
      - source_indexes: [hrStorageIndex]
        lookup: 1.3.6.1.2.1.25.2.3.1.3 # hrStorageDescr
        drop_source_indexes: false
    metrics:
      - name: sysUpTime
        oid: 1.3.6.1.2.1.1.3
        type: gauge
        help: The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
      
      - name: hrProcessorLoad
        oid: 1.3.6.1.2.1.25.3.3.1.2
        type: gauge
        help: The average, over the last minute, of the percentage of time that this processor was not idle.
        indexes:
          - labelname: cpu
            type: gauge

      - name: hrStorageSize
        oid: 1.3.6.1.2.1.25.2.3.1.5
        type: gauge
        help: The size of the storage represented by this entry, in units of hrStorageAllocationUnits.
        indexes:
          - labelname: hrStorageIndex
            type: gauge

      - name: hrStorageUsed
        oid: 1.3.6.1.2.1.25.2.3.1.6
        type: gauge
        help: The amount of the storage represented by this entry that is allocated, in units of hrStorageAllocationUnits.
        indexes:
          - labelname: hrStorageIndex
            type: gauge
            
      - name: hrStorageAllocationUnits
        oid: 1.3.6.1.2.1.25.2.3.1.4
        type: gauge
        help: The size, in bytes, of the data objects allocated from this pool.
        indexes:
          - labelname: hrStorageIndex
            type: gauge

      - name: ifOctets
        oid: 1.3.6.1.2.1.31.1.1.1.6 
        type: counter
        help: The total number of octets received on the interface.
        indexes:
          - labelname: interface
            type: gauge
      - name: ifOutOctets
        oid: 1.3.6.1.2.1.31.1.1.1.10
        type: counter
        help: The total number of octets transmitted out of the interface.
        indexes:
          - labelname: interface
            type: gauge
